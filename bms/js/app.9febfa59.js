(function(t){function e(e){for(var s,l,r=e[0],n=e[1],d=e[2],u=0,p=[];u<r.length;u++)l=r[u],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&p.push(o[l][0]),o[l]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);c&&c(e);while(p.length)p.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,r=1;r<a.length;r++){var n=a[r];0!==o[n]&&(s=!1)}s&&(i.splice(e--,1),t=l(l.s=a[0]))}return t}var s={},o={app:0},i=[];function l(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=s,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(a,s,function(e){return t[e]}.bind(null,s));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],n=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var c=n;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0a68":function(t,e,a){},"10f8":function(t,e,a){},"11d9":function(t,e,a){t.exports=a.p+"img/3.b149f0c3.jpg"},2192:function(t,e,a){"use strict";var s=a("50f4"),o=a.n(s);o.a},"254e":function(t,e,a){},4413:function(t,e,a){"use strict";var s=a("951d"),o=a.n(s);o.a},"50f4":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],l=a("bc3a"),r=a.n(l),n={name:"app"},d=n,c=(a("5c0b"),a("2877")),u=Object(c["a"])(d,o,i,!1,null,null,null),p=u.exports,h=a("8c4f"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("div",{staticClass:"from"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-width":"300px"}},[a("el-input",{attrs:{type:"text","prefix-icon":"el-icon-user",placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[a("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")]),a("el-button",{attrs:{type:"success"},on:{click:t.clear}},[t._v("重置")])],1)],1),t._m(0)])},g=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"img_vue"},[s("img",{attrs:{src:a("cf05"),alt:""}})])}],b={data(){return{username:"",password:""}},created(){},mounted(){},methods:{clear(){this.username="",this.password=""},login(){let t={username:this.username,password:this.password};this.$http.post("/login",t).then(({data:t})=>{"登录成功"==t.meta.msg?(sessionStorage.setItem("token",t.data.token),this.$router.push("/home")):alert(t.meta.msg)})}}},f=b,v=(a("4413"),Object(c["a"])(f,m,g,!1,null,"0269c20e",null)),_=v.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("el-container",[s("el-header",[s("div",{staticClass:"header_left"},[s("img",{attrs:{src:a("11d9"),alt:""}}),s("span",[t._v("电商后台管理系统")])]),s("el-button",{attrs:{type:"info"},on:{click:t.open}},[t._v("退出")])],1),s("el-container",[s("el-aside",{attrs:{width:""}},[s("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{"background-color":"#333744"},attrs:{"default-active":t.activePath,collapse:t.flag,"unique-opened":"","collapse-transition:false":"",router:"","background-color":"#333744","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:t.handleOpen,close:t.handleClose}},[s("p",{staticClass:"mulu",on:{click:function(e){t.flag=!t.flag}}},[t._v("|||")]),t._l(t.menus,(function(e,a){return s("el-submenu",{key:e.id,staticStyle:{background:"#333744"},attrs:{index:e.path}},[s("template",{staticStyle:{background:"#333744"},slot:"title"},[s("i",{class:t.ico[a]}),s("span",{staticStyle:{"margin-right":"100px"}},[t._v(t._s(e.authName))])]),t._l(e.children,(function(e){return s("el-menu-item",{key:e.id,staticStyle:{"min-width":"190px"},attrs:{index:"/home/"+e.path},on:{click:function(s){return t.toPath(a,"/home/"+e.path)}}},[s("i",{staticClass:"el-icon-menu"}),t._v(" "+t._s(e.authName))])}))],2)}))],2)],1),s("el-main",[s("keep-alive",[s("router-view")],1)],1)],1)],1)],1)},y=[],x={data(){return{flag:!1,menus:[],ico:["el-icon-user","el-icon-s-tools","el-icon-s-order","el-icon-tickets","el-icon-s-marketing"],activePath:sessionStorage.getItem("activePath")||""}},watch:{$route:{handler(t){console.log(t),sessionStorage.setItem("activePath",t.path),this.activePath=sessionStorage.getItem("activePath")},deep:!0,immediate:!0,isClose:!1}},mounted(){console.log(JSON.parse(localStorage.getItem("islogin"))),JSON.parse(localStorage.getItem("islogin"))&&(this.$message({type:"success",message:"登陆成功"}),localStorage.setItem("islogin",!1)),this.$http("/menus").then(t=>{console.log(t.data.data),this.menus=t.data.data})},beforeRouteUpdate(t,e,a){console.log(t,e),e.path,a()},methods:{toPath(t,e){sessionStorage.setItem("activePath",e)},handleOpen(t,e){console.log(t,e),this.opends=e},handleClose(t,e){console.log(e)},open(){this.$confirm("确定退出么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{sessionStorage.removeItem("token"),this.$router.push("/login"),this.$message({type:"success",message:"退出成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消退出"})})}}},k=x,S=(a("9019"),Object(c["a"])(k,w,y,!1,null,"3b2a9e74",null)),$=S.exports,L=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("欢迎来到实力至上主义教室！")])])}],O={data(){return{}},created(){},mounted(){},methods:{}},j=O,z=Object(c["a"])(j,L,C,!1,null,"dec171b0",null),A=z.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userList"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("用户管理")]),a("el-breadcrumb-item",[t._v("用户列表")])],1),a("div",{staticClass:"content"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"请输入内容"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),a("button",{staticClass:"search_btn",on:{click:function(e){return t.search()}}},[a("van-icon",{staticClass:"search_ico",attrs:{name:"search"}})],1),a("el-button",{staticStyle:{height:"40px","margin-left":"30px"},attrs:{type:"primary"},on:{click:t.isaddShow}},[t._v("添加用户")])],1),a("table",{attrs:{border:"1",cellspacing:"0",cellpadding:"0"}},[t._m(0),t._l(t.list,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.id))]),a("td",[t._v(t._s(e.username))]),a("td",[t._v(t._s(e.email))]),a("td",[t._v(t._s(e.mobile))]),a("td",[t._v(t._s(e.role_name))]),a("td",{on:{click:function(a){return t.changeState(e)}}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.mg_state,callback:function(a){t.$set(e,"mg_state",a)},expression:"i.mg_state"}})],1),a("td",[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.edit(e)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.del(e)}}}),a("el-button",{attrs:{type:"warning",icon:"el-icon-setting"},on:{click:function(a){return t.set_role(e)}}})],1)])}))],2),a("el-pagination",{attrs:{"current-page":t.pagenum,"page-sizes":[1,2,3,4,5,6,7,8,9,10],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("van-popup",{model:{value:t.addShow,callback:function(e){t.addShow=e},expression:"addShow"}},[a("div",{staticClass:"add"},[a("p",[a("span",[t._v("添加用户")]),a("span",{on:{click:t.isaddShow}},[t._v("x")])]),a("el-form",{ref:"addForm",staticClass:"demo-ruleForm",attrs:{model:t.addList,rules:t.rules,"label-position":t.labelPosition,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"username",label:"用户名"}},[a("el-input",{model:{value:t.addList.username,callback:function(e){t.$set(t.addList,"username",e)},expression:"addList.username"}})],1),a("el-form-item",{attrs:{prop:"password",label:"密码"}},[a("el-input",{model:{value:t.addList.password,callback:function(e){t.$set(t.addList,"password",e)},expression:"addList.password"}})],1),a("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[a("el-input",{model:{value:t.addList.email,callback:function(e){t.$set(t.addList,"email",e)},expression:"addList.email"}})],1),a("el-form-item",{attrs:{prop:"mobile",label:"电话"}},[a("el-input",{model:{value:t.addList.mobile,callback:function(e){t.$set(t.addList,"mobile",e)},expression:"addList.mobile"}})],1)],1),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:t.isaddShow}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("确定")])],1)],1)]),a("van-popup",{model:{value:t.updateShow,callback:function(e){t.updateShow=e},expression:"updateShow"}},[a("div",{staticClass:"add"},[a("p",[a("span",[t._v("修改列表")]),a("span",{on:{click:t.isupdateShow}},[t._v("x")])]),a("el-form",{ref:"updateForm",attrs:{model:t.updateList,rules:t.rules,"label-position":t.labelPosition,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:""},model:{value:t.updateList.username,callback:function(e){t.$set(t.updateList,"username",e)},expression:"updateList.username"}})],1),a("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[a("el-input",{model:{value:t.updateList.email,callback:function(e){t.$set(t.updateList,"email",e)},expression:"updateList.email"}})],1),a("el-form-item",{attrs:{prop:"mobile",label:"电话"}},[a("el-input",{model:{value:t.updateList.mobile,callback:function(e){t.$set(t.updateList,"mobile",e)},expression:"updateList.mobile"}})],1)],1),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:t.isupdateShow}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("确定")])],1)],1)]),a("van-popup",{model:{value:t.setShow,callback:function(e){t.setShow=e},expression:"setShow"}},[a("div",{staticClass:"add"},[a("p",[a("span",[t._v("分配新角色 ")]),a("span",{on:{click:t.issetshow}},[t._v("x")])]),a("div",{staticClass:"set"},[a("p",[t._v("当前用户:"+t._s(t.setObj.username))]),a("p",[t._v("当前的角色:"+t._s(t.setObj.role_name))]),a("p",[t._v(" 分配新角色： "),a("el-form",{ref:"form",staticStyle:{height:"40px"},attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},[a("el-option",{attrs:{label:"垃圾管路员",value:"垃圾故管理员"}}),a("el-option",{attrs:{label:"管路员",value:"管理员"}})],1)],1)],1)],1)]),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:t.issetshow}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.setrole}},[t._v("确定")])],1)])])],1)},I=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("#")]),a("th",[t._v("姓名")]),a("th",[t._v("邮箱")]),a("th",[t._v("电话")]),a("th",[t._v("角色")]),a("th",[t._v("状态")]),a("th",[t._v("操作")])])}],P={name:"users",data(){return{rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:9,message:"长度在 3 到 9个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:9,message:"长度在 3 到 9个字符",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:3,max:9,message:"长度在 3 到 20个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{min:3,max:9,message:"长度在 3 到 11个字符",trigger:"blur"}]},form:{region:""},list:[],pagenum:1,pagesize:2,addShow:!1,labelPosition:"right",addList:{username:"",password:"",mobile:"",email:""},updateList:{username:"",mobile:"",email:""},updateShow:!1,setObj:{},setShow:!1,total:2,keyword:"",search_id:"",changeList:""}},created(){},mounted(){this.getList()},watch:{keyword(t){""==t&&this.getList()},addShow(t){t||(this.addList={username:"",password:"",mobile:"",email:""})}},methods:{async changeState(t){console.log(t);let e=await this.$http.put(`users/${t.id}/state/${t.mg_state}`);console.log(e.data.meta.msg),200==e.data.meta.status&&(this.changeList="修改状态成功",this.getList())},async search(){let{data:t}=await this.$http.get(`/users?pagenum=${this.pagenum}&pagesize=${this.total}`),e=t.data.users.filter(t=>-1!=t.username.indexOf(this.keyword));console.log(e),this.list=e},isaddShow(){this.addShow=!this.addShow},add(){this.$http.post("users/",this.addList).then(({data:t})=>{console.log(t),this.addShow=!this.addShow,"创建成功"==t.meta.msg?(this.changeList="添加成功",this.getList()):this.changeList="添加失败"})},isupdateShow(){this.updateShow=!this.updateShow},edit(t){this.updateShow=!this.updateShow,this.updateList=t,console.log(this.updateList)},update(){this.$http.put("/users/"+this.updateList.id,{mobile:this.updateList.mobile,email:this.updateList.email}).then(t=>{console.log(t),this.updateShow=!this.updateShow,200==t.status?(this.changeList="修改成功",this.getList()):this.changeList="修改失败"})},del(t){confirm("确定要删除么")&&(console.log(typeof t.id),this.$http.delete("users/"+t.id).then(t=>{console.log(t.data.meta),200==t.data.meta.status?(this.changeList="删除成功",this.getList()):this.changeList="删除失败"}))},setrole(){this.$http.put(`users/${this.setObj.id}/role`,{rid:111}).then(t=>{console.log(t),this.setShow=!this.setShow,200==t.data.meta.status?(this.changeList="修改角色等级成功",this.getList()):this.changeList="修改角色等级失败"})},issetshow(){this.setShow=!this.setShow},set_role(t){this.setObj=t,this.setShow=!this.setShow},getList(){this.$http.get(`/users?pagenum=${this.pagenum}&pagesize=${this.pagesize}`).then(({data:t})=>{this.list=t.data.users,this.total=t.data.total,""!=this.changeList&&(this.$message({type:"success",message:this.changeList}),this.changeList="")})},handleSizeChange(t){console.log(`每页 ${t} 条`),this.pagesize=t,this.getList()},handleCurrentChange(t){this.pagenum=t,this.getList(),console.log("当前页: "+t)}}},D=P,G=(a("9e19"),Object(c["a"])(D,N,I,!1,null,"4b408aa2",null)),E=G.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rights"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("权限管理")]),a("el-breadcrumb-item",[t._v("权限列表")])],1),a("div",{staticClass:"table"},[a("table",{attrs:{border:"1",cellspacing:"0",cellpadding:"0"}},[t._m(0),t._l(t.list,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s))]),a("td",[t._v(t._s(e.authName))]),a("td",[t._v(t._s(e.path))]),a("td",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.level,expression:"i.level == 0"}],attrs:{type:"primary",plain:""}},[t._v("一级")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.level,expression:"i.level == 1"}],attrs:{type:"success",plain:""}},[t._v("二级")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2==e.level,expression:"i.level == 2"}],attrs:{type:"warning",plain:""}},[t._v("三级")])],1)])}))],2)])],1)},B=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("#")]),a("th",[t._v("权限名称")]),a("th",[t._v("路径")]),a("th",[t._v("权限等级")])])}],T={name:"rights",data(){return{list:[]}},created(){},mounted(){this.getList()},methods:{getList(){this.$http.get("/rights/list").then(({data:t})=>{console.log(t),this.list=t.data})}}},F=T,R=(a("fabc"),Object(c["a"])(F,q,B,!1,null,"535f89c9",null)),J=R.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"roles"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("权限管理")]),a("el-breadcrumb-item",[t._v("角色列表")])],1),a("div",{staticClass:"table"},[a("p",[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.addShow=!t.addShow}}},[t._v("添加角色")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:t.list}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},t._l(e.row.children,(function(s,o){return a("el-row",{key:o,class:["dbbottom",0===o?"dbtop":""]},[a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{closable:"","disable-transitions":!1,effect:"dark"},on:{close:function(a){return t.removeRights(e.row,s.id)}}},[t._v(t._s(s.authName))]),a("i",{staticClass:"el-icon-caret-right"})],1),a("el-col",{attrs:{span:19}},t._l(s.children,(function(s,o){return a("el-row",{key:o,class:[0===o?"":"dbtop"]},[a("el-col",{attrs:{span:6}},[a("el-tag",{attrs:{closable:"",type:"success","disable-transitions":!1,effect:"dark"},on:{close:function(a){return t.removeRights(e.row.id,s.id)}}},[t._v(t._s(s.authName))]),a("i",{staticClass:"el-icon-caret-right"})],1),a("el-col",{attrs:{span:18}},t._l(s.children,(function(s,o){return a("el-tag",{key:o,attrs:{closable:"",type:"warning","disable-transitions":!1,effect:"dark"},on:{close:function(a){return t.removeRights(e.row.id,s.id)}}},[t._v(t._s(s.authName))])})),1)],1)})),1)],1)})),1)]}}])}),a("el-table-column",{attrs:{label:"ID",prop:"id"}}),a("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),a("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),a("el-table-column",{attrs:{label:"角色操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-setting"},on:{click:function(a){return t.set_role(e.row)}}},[t._v("分配权限")])]}}])})],1)],1),a("van-popup",{model:{value:t.updateShow,callback:function(e){t.updateShow=e},expression:"updateShow"}},[a("div",{staticClass:"update"},[a("p",[a("span",[t._v("修改角色")]),a("span",{on:{click:function(e){t.updateShow=!t.updateShow}}},[t._v("x")])]),a("div",{staticClass:"input"},[a("el-form",{ref:"updateForm",attrs:{model:t.editObj,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"roleName",label:"角色名称"}},[a("el-input",{model:{value:t.editObj.roleName,callback:function(e){t.$set(t.editObj,"roleName",e)},expression:"editObj.roleName"}})],1),a("el-form-item",{attrs:{prop:"roleDesc",label:"角色描述"}},[a("el-input",{model:{value:t.editObj.roleDesc,callback:function(e){t.$set(t.editObj,"roleDesc",e)},expression:"editObj.roleDesc"}})],1)],1)],1),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:function(e){t.updateShow=!t.updateShow}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("确定")])],1)])]),a("van-popup",{model:{value:t.addShow,callback:function(e){t.addShow=e},expression:"addShow"}},[a("div",{staticClass:"update"},[a("p",[a("span",[t._v("添加角色")]),a("span",{on:{click:function(e){t.addShow=!t.addShow}}},[t._v("x")])]),a("div",{staticClass:"input"},[a("el-form",{ref:"addForm",attrs:{model:t.addObj,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"roleName",label:"角色名称"}},[a("el-input",{model:{value:t.addObj.roleName,callback:function(e){t.$set(t.addObj,"roleName",e)},expression:"addObj.roleName"}})],1),a("el-form-item",{attrs:{prop:"roleDesc",label:"角色描述"}},[a("el-input",{model:{value:t.addObj.roleDesc,callback:function(e){t.$set(t.addObj,"roleDesc",e)},expression:"addObj.roleDesc"}})],1)],1)],1),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:function(e){t.addShow=!t.addShow}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("确定")])],1)])]),a("van-popup",{model:{value:t.issetroleShow,callback:function(e){t.issetroleShow=e},expression:"issetroleShow"}},[a("div",{staticClass:"set_role"},[a("div",{staticClass:"center"},[a("el-tree",{ref:"tree",attrs:{"node-key":"id","default-checked-keys":t.checkboxArr,"default-expand-all":"","show-checkbox":"",data:t.rightsList,props:t.treeProps}}),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:function(e){t.issetroleShow=!t.issetroleShow}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.setRole()}}},[t._v("确定")])],1)],1)])])],1)},K=[],U={data(){return{checkboxArr:[],setRoleObj:{},issetroleShow:!1,rightsList:[],treeProps:{children:"children",label:"authName"},rules:{roleName:[{required:!0,message:"请输入名称",trigger:["blur","change"]},{min:3,max:9,message:"长度在 3 到 9个字符",trigger:["blur","change"]}],roleDesc:[{required:!0,message:"请输入描述",trigger:["blur","change"]},{min:3,max:9,message:"长度在 3 到 9个字符",trigger:["blur","change"]}]},list:[],updateShow:!1,editObj:{roleName:"",roleDesc:""},addObj:{roleName:"",roleDesc:""},addShow:!1}},watch:{addShow(t){t||(this.addObj={roleName:"",roleDesc:""})}},mounted(){this.getList()},methods:{set_role(t){this.digui(t,this.checkboxArr),console.log(t,this.checkboxArr),this.issetroleShow=!this.issetroleShow,this.setRoleObj=t,this.$http.get("rights/tree").then(t=>{this.rightsList=t.data.data})},async setRole(){let t=[...this.$refs.tree.getCheckedKeys(),...this.$refs.tree.getHalfCheckedKeys()],e=t.join(",");console.log(e);let{data:a}=await this.$http.post(`roles/${this.setRoleObj.id}/rights`,{rids:e});console.log(a),this.issetroleShow=!this.issetroleShow,this.getList()},digui(t,e){if(!t.children)return console.log(t.id),e.push(t.id);t.children.forEach(t=>{this.digui(t,e)})},async del(t){await this.$http.delete("/roles/"+t.id),this.getList()},async removeRights(t,e){let a=await this.$confirm("确定删除么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});if(a){let{data:a}=await this.$http.delete(`roles/${t}/rights/${e}`);console.log(a),this.getList(),this.$message({type:"success",message:"删除成功!"})}else this.$message({type:"info",message:"删除失败"})},async add(){await this.$http.post("/roles",{roleName:this.addObj.roleName,roleDesc:this.addObj.roleDesc}),this.getList(),this.addShow=!this.addShow},edit(t){this.updateShow=!this.updateShow,this.editObj=JSON.parse(JSON.stringify(t))},async update(){await this.$http.put("/roles/"+this.editObj.id,{roleName:this.editObj.roleName,roleDesc:this.editObj.roleDesc}),this.updateShow=!this.updateShow,this.getList()},getList(){this.$http.get("/roles").then(({data:t})=>{console.log(t),this.list=t.data})}}},H=U,Q=(a("654d"),Object(c["a"])(H,M,K,!1,null,"05b673a4",null)),V=Q.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goods"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品列表")])],1),a("div",{staticClass:"content"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"请输入搜索内容"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),a("button",{staticClass:"search_btn",on:{click:function(e){return t.search()}}},[a("van-icon",{staticClass:"search_ico",attrs:{name:"search"}})],1),a("el-button",{staticStyle:{height:"40px","margin-left":"30px"},attrs:{type:"primary"},on:{click:t.toAdd}},[t._v("添加商品")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"48"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",width:"742"}}),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量"}}),a("el-table-column",{attrs:{prop:"add_time",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.add_time)+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.update_one(e.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.del(e.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":t.pagenum,"page-sizes":[10,20,35,40,55,60,70,80,90,100],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("van-popup",{model:{value:t.updateShow,callback:function(e){t.updateShow=e},expression:"updateShow"}},[a("div",{staticClass:"update"},[a("p",[a("span",[t._v("修改商品")]),a("span",{on:{click:function(e){t.updateShow=!t.updateShow}}},[t._v("x")])]),a("div",{staticClass:"input"},[a("el-form",{ref:"updateForm",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"roleName",label:"商品名称"}},[a("el-input",{model:{value:t.updateObj.goods_name,callback:function(e){t.$set(t.updateObj,"goods_name",e)},expression:"updateObj.goods_name"}})],1),a("el-form-item",{attrs:{prop:"roleDesc",label:"商品价格"}},[a("el-input",{model:{value:t.updateObj.goods_price,callback:function(e){t.$set(t.updateObj,"goods_price",e)},expression:"updateObj.goods_price"}})],1),a("el-form-item",{attrs:{prop:"roleName",label:"商品数量"}},[a("el-input",{model:{value:t.updateObj.goods_number,callback:function(e){t.$set(t.updateObj,"goods_number",e)},expression:"updateObj.goods_number"}})],1),a("el-form-item",{attrs:{prop:"roleDesc",label:"商品重量"}},[a("el-input",{model:{value:t.updateObj.goods_weight,callback:function(e){t.$set(t.updateObj,"goods_weight",e)},expression:"updateObj.goods_weight"}})],1)],1)],1),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:function(e){t.updateShow=!t.updateShow}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("确定")])],1)])])],1)},X=[],Y={data(){return{list:[],pagenum:1,pagesize:10,total:0,keyword:"",issearch:!1,updateShow:!1,updateObj:{goods_name:"",goods_number:"",goods_price:"",goods_weight:""}}},activated(){this.getList()},watch:{keyword(t){""==t&&(this.issearch=!1,this.getList())}},mounted(){this.getList()},methods:{toAdd(){this.$router.push("/home/addGoods")},update_one(t){this.updateShow=!this.updateShow,console.log(t),this.updateObj=t},async update(){let t=await this.$http.put("/goods/"+this.updateObj.goods_id,{goods_name:this.updateObj.goods_name,goods_price:this.updateObj.goods_price,goods_number:this.updateObj.goods_number,goods_weigth:this.updateObj.goods_weight});console.log(t),this.updateShow=!this.updateShow},async getList(){let t="";t=this.issearch?await this.$http.get(`/goods?query=${this.keyword}&pagenum=${this.pagenum}&pagesize=${this.pagesize}`):await this.$http.get(`/goods?pagenum=${this.pagenum}&pagesize=${this.pagesize}`),this.list=t.data.data.goods,this.list.forEach(t=>{t.add_time=new Date(t.add_time).toLocaleString()}),console.log(t.data),this.total=t.data.data.total},async search(){this.issearch=!0,this.getList()},async del(t){console.log(t);let e=await this.$confirm("确定删除么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});if(e){let{data:e}=await this.$http.delete("goods/"+t.goods_id);console.log(e),this.getList(),this.$message({type:"success",message:"删除成功!"})}else this.$message({type:"info",message:"删除失败"})},handleSizeChange(t){console.log(`每页 ${t} 条`),this.pagesize=t,this.getList()},handleCurrentChange(t){this.pagenum=t,this.getList(),console.log("当前页: "+t)}}},Z=Y,tt=(a("da54"),Object(c["a"])(Z,W,X,!1,null,"468278e0",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addGoods"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("添加商品")])],1),a("div",{staticClass:"content"},[a("el-alert",{attrs:{title:"添加商品信息",type:"info",center:"",closable:!1,"close-text":"","show-icon":""}}),a("div",{staticClass:"buzhou"},[a("el-steps",{attrs:{active:t.active,"finish-status":"success",space:200,"align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-tabs",{attrs:{"tab-position":t.tabPosition},on:{"tab-click":t.activeNum}},[a("el-tab-pane",{attrs:{label:"基本信息"}},[a("el-form",{ref:"addGoods",attrs:{model:t.addGoods,rules:t.rules,"label-position":t.labelPosition,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"goods_name",label:"商品名称"}},[a("el-input",{model:{value:t.addGoods.goods_name,callback:function(e){t.$set(t.addGoods,"goods_name",e)},expression:"addGoods.goods_name"}})],1),a("el-form-item",{attrs:{prop:"goods_price",label:"商品区价格"}},[a("el-input",{model:{value:t.addGoods.goods_price,callback:function(e){t.$set(t.addGoods,"goods_price",e)},expression:"addGoods.goods_price"}})],1),a("el-form-item",{attrs:{prop:"goods_number",label:"商品数量"}},[a("el-input",{model:{value:t.addGoods.goods_number,callback:function(e){t.$set(t.addGoods,"goods_number",e)},expression:"addGoods.goods_number"}})],1),a("el-form-item",{attrs:{prop:"goods_weight",label:"商品重量"}},[a("el-input",{model:{value:t.addGoods.goods_weight,callback:function(e){t.$set(t.addGoods,"goods_weight",e)},expression:"addGoods.goods_weight"}})],1),a("el-form-item",{attrs:{prop:"goods_weight",label:"商品分类"}},[a("el-cascader",{attrs:{options:t.categoriesList,props:t.peizhi,clearable:""},model:{value:t.addGoods.goods_cat,callback:function(e){t.$set(t.addGoods,"goods_cat",e)},expression:"addGoods.goods_cat"}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"商品参数"}},[t._v("配置管理")]),a("el-tab-pane",{attrs:{label:"商品属性"}},[t._v("角色管理")]),a("el-tab-pane",{attrs:{label:"商品图片"}},[t._v("定时任务补偿")]),a("el-tab-pane",{attrs:{label:"商品内容"}},[a("div",{staticClass:"textarea"},[a("textarea",{attrs:{name:"",id:"",cols:"30",rows:"10"}}),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.add}},[t._v("立即添加")])],1)])],1)],1)],1)],1)},st=[],ot={data(){return{categoriesList:[],peizhi:{label:"cat_name",value:"cat_id",children:"children",expandTrigger:"hover"},active:1,tabPosition:"left",labelPosition:"top",rules:{goods_name:[{required:!0,message:"请输入商品名",trigger:"blur"}],goods_price:[{required:!0,message:"请输入价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入重量",trigger:"blur"}],goods_number:[{required:!0,message:"请输入数量",trigger:"blur"}],goods_fenlei:[{required:!0,message:"请输选择分类",trigger:"blur"}]},addGoods:{goods_name:"",goods_number:"",goods_price:"",goods_weight:"",goods_introduce:"",goods_cat:[]}}},created(){},mounted(){this.getcategories()},methods:{async add(){this.addGoods.goods_cat=this.addGoods.goods_cat.join(",");let{data:t}=await this.$http.post("/goods",this.addGoods);this.$router.push("/home/goods"),console.log(t)},async getcategories(){let{data:t}=await this.$http.get("/categories",{params:{type:3}});console.log(t),this.categoriesList=t.data},activeNum(t){this.active=t.paneName,console.log(this.active)}}},it=ot,lt=(a("5d00"),Object(c["a"])(it,at,st,!1,null,"52aecb86",null)),rt=lt.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("分类参数")])],1),a("div",{staticClass:"content"},[a("el-alert",{attrs:{title:"注意：只允许为第三级参数设置分类",type:"warning","show-icon":"",effect:"dark"}}),a("div",{staticClass:"fenlei"},[a("p",[t._v(" 请选择商品分类： "),a("el-cascader",{attrs:{options:t.categoriesList,props:t.peizhi,clearable:""},on:{change:t.handleChange},model:{value:t.selsetIdArr,callback:function(e){t.selsetIdArr=e},expression:"selsetIdArr"}})],1)]),a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.tabs}},[a("el-button",{attrs:{type:"primary",disabled:t.isDisabled},on:{click:t.showAdd}},[t._v(t._s(t.addwhat))]),a("el-tab-pane",{attrs:{label:"动态参数"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.attributes}},[a("el-table-column",{attrs:{type:"expand"}},[[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}})]],2),a("el-table-column",{attrs:{label:"#",type:"index"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.edit(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态属性"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.attributes}},[a("el-table-column",{attrs:{type:"expand"}},[[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}})]],2),a("el-table-column",{attrs:{label:"#",type:"index"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.edit(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)],1),a("el-dialog",{attrs:{title:t.title,visible:t.dongtai,width:"50%"},on:{"update:visible":function(e){t.dongtai=e},"before-close":t.dongtaiClose}},[a("el-form",{ref:"add",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:t.label}},[a("el-input",{model:{value:t.attr_name,callback:function(e){t.attr_name=e},expression:"attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.dongtaiClose}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:t.addTitle,visible:t.isShowAdd,width:"50%"},on:{"update:visible":function(e){t.isShowAdd=e},"before-close":t.showAdd}},[a("el-form",{ref:"add",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:t.label}},[a("el-input",{model:{value:t.addAttr,callback:function(e){t.addAttr=e},expression:"addAttr"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.showAdd}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("确 定")])],1)],1)],1)},dt=[],ct={data(){return{addTitle:"添加动态参数",addAttr:"",isShowAdd:!1,isDisabled:!0,addwhat:"添加参数",dongtai:!1,peizhi:{label:"cat_name",value:"cat_id",children:"children",expandTrigger:"hover"},categoriesList:[],selsetIdArr:[],sel:"many",attributes:[],updateAttributesObj:{},attr_name:"",title:"修改动态参数",label:"动态参数"}},created(){},mounted(){this.getcategories()},methods:{async add(){let{data:t}=await this.$http.post(`categories/${this.selsetIdArr[2]}/attributes`,{attr_name:this.addAttr,attr_sel:this.sel});console.log(t),this.getSelList(),this.isShowAdd=!this.isShowAdd,this.$message({type:"success",message:"添加成功!"})},showAdd(){this.isShowAdd=!this.isShowAdd},async update(){let{data:t}=await this.$http.put(`categories/${this.updateAttributesObj.cat_id}/attributes/${this.updateAttributesObj.attr_id}`,{attr_name:this.attr_name,attr_sel:this.sel});this.dongtai=!this.dongtai,this.getSelList(),console.log(t),this.$message({type:"success",message:"修改成功!"})},edit(t){this.updateAttributesObj=t,this.dongtai=!this.dongtai},dongtaiClose(){this.dongtai=!this.dongtai},async del(t){let e=await this.$confirm("确定删除么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});if(e){let{data:e}=await this.$http.delete(`/categories/${t.cat_id}/attributes/${t.attr_id}`);console.log(e),this.getSelList(),this.$message({type:"success",message:"删除成功!"})}else this.$message({type:"info",message:"删除失败"});console.log(data)},tabs(t){console.log(t),0==t.panName?(this.sel="many",this.title="修改动态参数",this.label="动态参数",this.addTitle="添加动态参数",this.addwhat="添加参数",this.getSelList()):(this.sel="only",this.getSelList(),this.addTitle="添加静态属性",this.title="修改静态属性",this.label="静态属性",this.addwhat="添加属性")},async getSelList(){let{data:t}=await this.$http(`/categories/${this.selsetIdArr[2]}/attributes/?sel=${this.sel}`);console.log(t),this.attributes=t.data},async getcategories(){let{data:t}=await this.$http.get("/categories",{params:{type:3}});console.log(t),this.categoriesList=t.data},handleChange(){console.log(this.selsetIdArr[2]),0==this.selsetIdArr.length?this.isDisabled=!0:this.isDisabled=!1,this.selsetIdArr.length<3&&this.$message({type:"error",message:"只能选择第三级分类"}),this.getSelList()}}},ut=ct,pt=(a("d54a"),Object(c["a"])(ut,nt,dt,!1,null,"d6583d10",null)),ht=pt.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("分类参数")])],1),a("el-card",[a("el-row",[a("el-button",{staticStyle:{"margin-bottom":"30px"},attrs:{type:"primary"},on:{click:t.showadd}},[t._v("添加分类")])],1),a("tree-table",{attrs:{border:"","index-text":"#","show-index":"","expand-type":!1,data:t.list,columns:t.columns,"selection-type":!1},scopedSlots:t._u([{key:"isok",fn:function(t){return[!1===t.row.cat_deleted?a("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}}):a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})]}},{key:"sort",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.cat_level,expression:"scope.row.cat_level == 0"}],attrs:{size:"mini",type:"primary"}},[t._v("一级")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.cat_level,expression:"scope.row.cat_level == 1"}],attrs:{type:"success",size:"mini"}},[t._v("二级")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2==e.row.cat_level,expression:"scope.row.cat_level == 2"}],attrs:{type:"warning",size:"mini"}},[t._v("三级")])]}},{key:"caozuo",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")])]}}])}),a("el-pagination",{attrs:{"current-page":t.queryIn.pagenum,"page-sizes":[1,2,3,4,5,6,7,8,9,10],"page-size":t.queryIn.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("van-popup",{model:{value:t.updateShow,callback:function(e){t.updateShow=e},expression:"updateShow"}},[a("div",{staticClass:"add"},[a("p",[a("span",[t._v("修改列表")]),a("span",{on:{click:function(e){t.updateShow=!t.updateShow}}},[t._v("x")])]),a("el-form",{ref:"updateForm",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:t.editObj.cat_name,callback:function(e){t.$set(t.editObj,"cat_name",e)},expression:"editObj.cat_name"}})],1)],1),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:function(e){t.updateShow=!t.updateShow}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("确定")])],1)],1)]),a("el-dialog",{attrs:{title:"添加",visible:t.addshow,width:"50%","before-close":t.showadd},on:{"update:visible":function(e){t.addshow=e}}},[a("el-form",{ref:"add",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名称"}},[a("el-input",{model:{value:t.addObj.cat_name,callback:function(e){t.$set(t.addObj,"cat_name",e)},expression:"addObj.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类"}},[a("el-cascader",{attrs:{options:t.parentCategoriesList,props:t.peizhi,clearable:"","change-on-select":""},model:{value:t.selsetIdArr,callback:function(e){t.selsetIdArr=e},expression:"selsetIdArr"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.showadd}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("确 定")])],1)],1)],1)],1)},gt=[],bt={data(){return{selectIdArr:[],parentCategoriesList:[],peizhi:{label:"cat_name",value:"cat_id",children:"children"},addObj:{cat_name:"",cat_pid:1,cat_level:1},addshow:!1,editObj:{},updateShow:!1,queryIn:{type:3,pagenum:1,pagesize:5},list:[],total:0,columns:[{label:"分类名称",prop:"cat_name"},{label:"是否有效",type:"template",template:"isok"},{label:"排序",type:"template",template:"sort"},{label:"操作",type:"template",template:"caozuo"}]}},created(){},mounted(){this.getList()},methods:{async getcategories(){let{data:t}=await this.$http.get("/categories",{params:{type:2}});console.log(t),this.parentCategoriesList=t.data},showadd(){this.addshow=!this.addshow,this.getcategories()},async add(){this.selectIdArr.length>0&&(1==this.selectIdArr.length?(this.addObj.cat_pid=1,this.addObj.cat_level=1):(this.addObj.cat_pid=2,this.addObj.cat_level=2));let{data:t}=await this.$http.post("/categories",this.addObj);console.log(t),this.addshow=!this.addshow},async del(t){let e=await this.$confirm("确定删除么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});if(e){let{data:e}=await this.$http.delete("/categories/"+t.cat_id);console.log(e),this.getList(),this.$message({type:"success",message:"删除成功!"})}else this.$message({type:"info",message:"删除失败"})},edit(t){this.editObj=t,this.updateShow=!0},async update(){this.updateShow=!1;let{data:t}=await this.$http.put("/categories/"+this.editObj.cat_id,{cat_name:this.editObj.cat_name});200==t.meta.status?this.$message({type:"success",message:"修改成功"}):this.$message({type:"error",message:"修改失败"}),this.getList(),console.log(t)},async getList(){let{data:t}=await this.$http("/categories",{params:this.queryIn});if(console.log(t),200!=t.meta.status)return this.$message.error("获取列表失败");this.list=t.data.result,this.total=t.data.total},handleSizeChange(t){console.log(`每页 ${t} 条`),this.queryIn.pagesize=t,this.getList()},handleCurrentChange(t){this.queryIn.pagenum=t,this.getList(),console.log("当前页: "+t)}}},ft=bt,vt=(a("2192"),Object(c["a"])(ft,mt,gt,!1,null,"2fc29634",null)),_t=vt.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("订单管理")]),a("el-breadcrumb-item",[t._v("订单列表")])],1),a("el-card",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"48"}}),a("el-table-column",{attrs:{prop:"order_number",label:"订单编号"}}),a("el-table-column",{attrs:{prop:"order_price",label:"订单价格价格"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"是否付款"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.pay_status?a("el-button",{attrs:{size:"mini",type:"success"}},[t._v("已付")]):a("el-button",{attrs:{size:"mini",type:"danger"}},[t._v("未付款")])]}}])}),a("el-table-column",{attrs:{prop:"is_send",label:"是否发货"}}),a("el-table-column",{attrs:{prop:"create_time",label:"下单时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.update_one(e.row)}}}),a("el-button",{attrs:{type:"success",icon:"el-icon-location",size:"mini"},on:{click:function(a){return t.location(e.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":t.pagenum,"page-sizes":[10,20,35,40,55,60,70,80,90,100],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加",visible:t.xinxi,width:"50%","before-close":t.close},on:{"update:visible":function(e){t.xinxi=e}}},[a("el-timeline",t._l(t.xinxiList,(function(e,s){return a("el-timeline-item",{key:s,attrs:{icon:e.icon,type:e.type,color:e.color,size:e.size,timestamp:e.time}},[t._v(" "+t._s(e.context)+" ")])})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.close}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.close}},[t._v("确 定")])],1)],1)],1)},yt=[],xt={data(){return{xinxi:!1,pagenum:1,pagesize:10,list:[],total:0,keyword:"",isSearch:!1,xinxiList:[]}},watch:{keyword(t){""==t&&(this.isSearch=!0,this.getList())}},mounted(){this.getList()},methods:{async location(t){let{data:e}=await this.$http.get("/kuaidi/1106975712662");console.log(e),this.xinxi=!this.xinxi,this.xinxiList=e.data},close(){this.xinxi=!this.xinxi},search(){this.isSearch=!0,this.getList()},async getList(){let t="";console.log(this.keyword),t=this.isSearch?await this.$http.get(`/orders?query=${this.keyword}&pagenum=${this.pagenum}&pagesize=${this.pagesize}`):await this.$http(`/orders?pagenum=${this.pagenum}&pagesize=${this.pagesize}`),this.list=t.data.data.goods,console.log(this.list),this.list.forEach(t=>{t.create_time=new Date(t.create_time).toLocaleString()}),this.total=t.data.data.total},handleSizeChange(t){console.log(`每页 ${t} 条`),this.pagesize=t,this.getList()},handleCurrentChange(t){this.pagenum=t,this.getList(),console.log("当前页: "+t)}}},kt=xt,St=(a("a8b0"),Object(c["a"])(kt,wt,yt,!1,null,"0ab7a2a8",null)),$t=St.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("数据管理")]),a("el-breadcrumb-item",[t._v("报表数据")])],1),a("el-card",{staticClass:"box-card"},[a("div",{style:{width:"800px",height:"400px"},attrs:{id:"myChart"}})])],1)},Ct=[],Ot=a("313e"),jt=a.n(Ot),zt={data(){return{}},created(){},mounted(){jt.a.init(document.getElementById("myChart"));var t=this.drawLine();window.onresize=function(){t.resize()}},methods:{drawLine(){let t=jt.a.init(document.getElementById("myChart"));return t.setOption({title:{text:"用户来源"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["华东","华南","华北","西部","其他"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"华东",type:"line",stack:"总量",areaStyle:{},data:[2999,3111,4100,3565,3528,6e3,6528]},{name:"华南",type:"line",stack:"总量",areaStyle:{},data:[5090,2500,3400,6e3,6400,7800,7e3]},{name:"华北",type:"line",stack:"总量",areaStyle:{},data:[6888,4e3,8010,12222,13548,12584,12500]},{name:"西部",type:"line",stack:"总量",areaStyle:{},data:[9991,4130,7777,12603,12898,13928,13320]},{name:"其他",type:"line",stack:"总量",label:{normal:{show:!0,position:"top"}},areaStyle:{},data:[15212,5800,10241,14521,15782,13891,14965]}]}),t}}},At=zt,Nt=(a("70ea"),Object(c["a"])(At,Lt,Ct,!1,null,"1a437daf",null)),It=Nt.exports;s["default"].use(h["a"]);const Pt=[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:_,beforeEnter(t,e,a){console.log(e),"/home/home_home"==e.path&&localStorage.setItem("islogin",!0),a()}},{path:"/home",name:"home",component:$,redirect:"/home/home_home",children:[{path:"home_home",name:"home_home",component:A},{path:"users",name:"users",component:E},{path:"rights",name:"rights",component:J},{path:"roles",name:"roles",component:V},{path:"goods",name:"goods",component:et},{path:"params",name:"params",component:ht},{path:"categories",name:"categoriess",component:_t},{path:"orders",name:"orders",component:$t},{path:"reports",name:"reports",component:It},{path:"addGoods",name:"addFoods",component:rt}],beforeEnter(t,e,a){let s=sessionStorage.getItem("token");s?a():(alert("请先登录"),a("/login"))}}],Dt=new h["a"]({routes:Pt});var Gt=Dt,Et=a("2f62");s["default"].use(Et["a"]);var qt=new Et["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Bt=a("b970");a("157a");s["default"].use(Bt["a"]);var Tt=a("5c96"),Ft=a.n(Tt);a("0fae");s["default"].use(Ft.a);let Rt=r.a.create({baseURL:"https://www.liulongbin.top:8888/api/private/v1",timeout:5e3}),Jt="";Rt.interceptors.request.use(t=>{Jt=Tt["Loading"].service({background:"rgba(0, 0, 0, 0.8)",text:"拼命加载中",fullscreen:!0,spinner:"el-icon-loading"});let e=sessionStorage.getItem("token");return console.log(e),e?t.headers.authorization=e:Gt.push("/login"),t}),Rt.interceptors.response.use(t=>(Jt.close(),t));var Mt=Rt,Kt=(a("a342"),a("d67e")),Ut=a.n(Kt);s["default"].component("tree-table",Ut.a),s["default"].prototype.$http=Mt,s["default"].config.productionTip=!1,new s["default"]({router:Gt,store:qt,render:function(t){return t(p)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var s=a("f80b"),o=a.n(s);o.a},"5d00":function(t,e,a){"use strict";var s=a("10f8"),o=a.n(s);o.a},"654d":function(t,e,a){"use strict";var s=a("668f"),o=a.n(s);o.a},"668f":function(t,e,a){},"70ea":function(t,e,a){"use strict";var s=a("76f1"),o=a.n(s);o.a},"76f1":function(t,e,a){},9019:function(t,e,a){"use strict";var s=a("dfeb"),o=a.n(s);o.a},"951d":function(t,e,a){},"9b7f":function(t,e,a){},"9e19":function(t,e,a){"use strict";var s=a("b93e"),o=a.n(s);o.a},a342:function(t,e,a){},a8b0:function(t,e,a){"use strict";var s=a("254e"),o=a.n(s);o.a},b93e:function(t,e,a){},c21d:function(t,e,a){},cf05:function(t,e,a){t.exports=a.p+"img/logo.82b9c7a5.png"},d54a:function(t,e,a){"use strict";var s=a("9b7f"),o=a.n(s);o.a},da54:function(t,e,a){"use strict";var s=a("0a68"),o=a.n(s);o.a},dfeb:function(t,e,a){},f80b:function(t,e,a){},fabc:function(t,e,a){"use strict";var s=a("c21d"),o=a.n(s);o.a}});
//# sourceMappingURL=app.9febfa59.js.map