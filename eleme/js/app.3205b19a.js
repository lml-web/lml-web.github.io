(function(e){function t(t){for(var s,l,r=t[0],n=t[1],d=t[2],u=0,p=[];u<r.length;u++)l=r[u],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&p.push(o[l][0]),o[l]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);c&&c(t);while(p.length)p.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,r=1;r<a.length;r++){var n=a[r];0!==o[n]&&(s=!1)}s&&(i.splice(t--,1),e=l(l.s=a[0]))}return e}var s={},o={app:0},i=[];function l(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=s,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(a,s,function(t){return e[t]}.bind(null,s));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],n=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var c=n;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0664":function(e,t,a){},"10f8":function(e,t,a){},"11d9":function(e,t,a){e.exports=a.p+"img/3.b149f0c3.jpg"},"1f72":function(e,t,a){},2192:function(e,t,a){"use strict";var s=a("50f4"),o=a.n(s);o.a},"254e":function(e,t,a){},"50f4":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],l=a("bc3a"),r=a.n(l),n={name:"app"},d=n,c=(a("5c0b"),a("2877")),u=Object(c["a"])(d,o,i,!1,null,null,null),p=u.exports,h=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"from"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-width":"300px"}},[a("el-input",{attrs:{type:"text","prefix-icon":"el-icon-user",placeholder:"请输入用户名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[a("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录按钮")]),a("el-button",{attrs:{type:"success"},on:{click:e.clear}},[e._v("重置按钮")])],1)],1),e._m(0)])},g=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"img_vue"},[s("img",{attrs:{src:a("cf05"),alt:""}})])}],b={data(){return{username:"",password:""}},created(){},mounted(){},methods:{clear(){this.username="",this.password=""},login(){let e={username:this.username,password:this.password};this.$http.post("/login",e).then(({data:e})=>{"登录成功"==e.meta.msg?(sessionStorage.setItem("token",e.data.token),this.$router.push("/home")):alert(e.meta.msg)})}}},f=b,v=(a("fc9a"),Object(c["a"])(f,m,g,!1,null,"8a9e574e",null)),_=v.exports,w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("el-container",[s("el-header",[s("div",{staticClass:"header_left"},[s("img",{attrs:{src:a("11d9"),alt:""}}),s("span",[e._v("电商后台管理系统")])]),s("el-button",{attrs:{type:"info"},on:{click:e.open}},[e._v("退出")])],1),s("el-container",[s("el-aside",{attrs:{width:""}},[s("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{"background-color":"#333744"},attrs:{"default-active":e.activePath,collapse:e.flag,"unique-opened":"","collapse-transition:false":"",router:"","background-color":"#333744","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleOpen,close:e.handleClose}},[s("p",{staticClass:"mulu",on:{click:function(t){e.flag=!e.flag}}},[e._v("|||")]),e._l(e.menus,(function(t,a){return s("el-submenu",{key:t.id,staticStyle:{background:"#333744"},attrs:{index:t.path}},[s("template",{staticStyle:{background:"#333744"},slot:"title"},[s("i",{class:e.ico[a]}),s("span",{staticStyle:{"margin-right":"100px"}},[e._v(e._s(t.authName))])]),e._l(t.children,(function(t){return s("el-menu-item",{key:t.id,staticStyle:{"min-width":"190px"},attrs:{index:"/home/"+t.path},on:{click:function(s){return e.toPath(a,"/home/"+t.path)}}},[s("i",{staticClass:"el-icon-menu"}),e._v(" "+e._s(t.authName))])}))],2)}))],2)],1),s("el-main",[s("keep-alive",[s("router-view")],1)],1)],1)],1)],1)},y=[],x={data(){return{flag:!1,menus:[],ico:["el-icon-user","el-icon-s-tools","el-icon-s-order","el-icon-tickets","el-icon-s-marketing"],activePath:sessionStorage.getItem("activePath")||""}},watch:{$route:{handler(e){console.log(e),sessionStorage.setItem("activePath",e.path),this.activePath=sessionStorage.getItem("activePath")},deep:!0,immediate:!0,isClose:!1}},mounted(){console.log(JSON.parse(localStorage.getItem("islogin"))),JSON.parse(localStorage.getItem("islogin"))&&(this.$message({type:"success",message:"登陆成功"}),localStorage.setItem("islogin",!1)),this.$http("/menus").then(e=>{console.log(e.data.data),this.menus=e.data.data})},beforeRouteUpdate(e,t,a){console.log(e,t),t.path,a()},methods:{toPath(e,t){sessionStorage.setItem("activePath",t)},handleOpen(e,t){console.log(e,t),this.opends=t},handleClose(e,t){console.log(t)},open(){this.$confirm("确定退出么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{sessionStorage.removeItem("token"),this.$router.push("/login"),this.$message({type:"success",message:"退出成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消退出"})})}}},k=x,S=(a("9019"),Object(c["a"])(k,w,y,!1,null,"3b2a9e74",null)),$=S.exports,L=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},C=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("欢迎来到实力至上主义教室！")])])}],O={data(){return{}},created(){},mounted(){},methods:{}},j=O,z=Object(c["a"])(j,L,C,!1,null,"dec171b0",null),A=z.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userList"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("用户管理")]),a("el-breadcrumb-item",[e._v("用户列表")])],1),a("div",{staticClass:"content"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"请输入内容"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),a("button",{staticClass:"search_btn",on:{click:function(t){return e.search()}}},[a("van-icon",{staticClass:"search_ico",attrs:{name:"search"}})],1),a("el-button",{staticStyle:{height:"40px","margin-left":"30px"},attrs:{type:"primary"},on:{click:e.isaddShow}},[e._v("添加用户")])],1),a("table",{attrs:{border:"1",cellspacing:"0",cellpadding:"0"}},[e._m(0),e._l(e.list,(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(t.id))]),a("td",[e._v(e._s(t.username))]),a("td",[e._v(e._s(t.email))]),a("td",[e._v(e._s(t.mobile))]),a("td",[e._v(e._s(t.role_name))]),a("td",{on:{click:function(a){return e.changeState(t)}}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.mg_state,callback:function(a){e.$set(t,"mg_state",a)},expression:"i.mg_state"}})],1),a("td",[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.edit(t)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.del(t)}}}),a("el-button",{attrs:{type:"warning",icon:"el-icon-setting"},on:{click:function(a){return e.set_role(t)}}})],1)])}))],2),a("el-pagination",{attrs:{"current-page":e.pagenum,"page-sizes":[1,2,3,4,5,6,7,8,9,10],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("van-popup",{model:{value:e.addShow,callback:function(t){e.addShow=t},expression:"addShow"}},[a("div",{staticClass:"add"},[a("p",[a("span",[e._v("添加用户")]),a("span",{on:{click:e.isaddShow}},[e._v("x")])]),a("el-form",{ref:"addForm",staticClass:"demo-ruleForm",attrs:{model:e.addList,rules:e.rules,"label-position":e.labelPosition,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"username",label:"用户名"}},[a("el-input",{model:{value:e.addList.username,callback:function(t){e.$set(e.addList,"username",t)},expression:"addList.username"}})],1),a("el-form-item",{attrs:{prop:"password",label:"密码"}},[a("el-input",{model:{value:e.addList.password,callback:function(t){e.$set(e.addList,"password",t)},expression:"addList.password"}})],1),a("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[a("el-input",{model:{value:e.addList.email,callback:function(t){e.$set(e.addList,"email",t)},expression:"addList.email"}})],1),a("el-form-item",{attrs:{prop:"mobile",label:"电话"}},[a("el-input",{model:{value:e.addList.mobile,callback:function(t){e.$set(e.addList,"mobile",t)},expression:"addList.mobile"}})],1)],1),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:e.isaddShow}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确定")])],1)],1)]),a("van-popup",{model:{value:e.updateShow,callback:function(t){e.updateShow=t},expression:"updateShow"}},[a("div",{staticClass:"add"},[a("p",[a("span",[e._v("修改列表")]),a("span",{on:{click:e.isupdateShow}},[e._v("x")])]),a("el-form",{ref:"updateForm",attrs:{model:e.updateList,rules:e.rules,"label-position":e.labelPosition,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.updateList.username,callback:function(t){e.$set(e.updateList,"username",t)},expression:"updateList.username"}})],1),a("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[a("el-input",{model:{value:e.updateList.email,callback:function(t){e.$set(e.updateList,"email",t)},expression:"updateList.email"}})],1),a("el-form-item",{attrs:{prop:"mobile",label:"电话"}},[a("el-input",{model:{value:e.updateList.mobile,callback:function(t){e.$set(e.updateList,"mobile",t)},expression:"updateList.mobile"}})],1)],1),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:e.isupdateShow}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确定")])],1)],1)]),a("van-popup",{model:{value:e.setShow,callback:function(t){e.setShow=t},expression:"setShow"}},[a("div",{staticClass:"add"},[a("p",[a("span",[e._v("分配新角色 ")]),a("span",{on:{click:e.issetshow}},[e._v("x")])]),a("div",{staticClass:"set"},[a("p",[e._v("当前用户:"+e._s(e.setObj.username))]),a("p",[e._v("当前的角色:"+e._s(e.setObj.role_name))]),a("p",[e._v(" 分配新角色： "),a("el-form",{ref:"form",staticStyle:{height:"40px"},attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[a("el-option",{attrs:{label:"垃圾管路员",value:"垃圾故管理员"}}),a("el-option",{attrs:{label:"管路员",value:"管理员"}})],1)],1)],1)],1)]),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:e.issetshow}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.setrole}},[e._v("确定")])],1)])])],1)},I=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",[e._v("#")]),a("th",[e._v("姓名")]),a("th",[e._v("邮箱")]),a("th",[e._v("电话")]),a("th",[e._v("角色")]),a("th",[e._v("状态")]),a("th",[e._v("操作")])])}],P={name:"users",data(){return{rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:9,message:"长度在 3 到 9个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:9,message:"长度在 3 到 9个字符",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:3,max:9,message:"长度在 3 到 20个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{min:3,max:9,message:"长度在 3 到 11个字符",trigger:"blur"}]},form:{region:""},list:[],pagenum:1,pagesize:2,addShow:!1,labelPosition:"right",addList:{username:"",password:"",mobile:"",email:""},updateList:{username:"",mobile:"",email:""},updateShow:!1,setObj:{},setShow:!1,total:2,keyword:"",search_id:"",changeList:""}},created(){},mounted(){this.getList()},watch:{keyword(e){""==e&&this.getList()},addShow(e){e||(this.addList={username:"",password:"",mobile:"",email:""})}},methods:{async changeState(e){console.log(e);let t=await this.$http.put(`users/${e.id}/state/${e.mg_state}`);console.log(t.data.meta.msg),200==t.data.meta.status&&(this.changeList="修改状态成功",this.getList())},async search(){let{data:e}=await this.$http.get(`/users?pagenum=${this.pagenum}&pagesize=${this.total}`),t=e.data.users.filter(e=>-1!=e.username.indexOf(this.keyword));console.log(t),this.list=t},isaddShow(){this.addShow=!this.addShow},add(){this.$http.post("users/",this.addList).then(({data:e})=>{console.log(e),this.addShow=!this.addShow,"创建成功"==e.meta.msg?(this.changeList="添加成功",this.getList()):this.changeList="添加失败"})},isupdateShow(){this.updateShow=!this.updateShow},edit(e){this.updateShow=!this.updateShow,this.updateList=e,console.log(this.updateList)},update(){this.$http.put("/users/"+this.updateList.id,{mobile:this.updateList.mobile,email:this.updateList.email}).then(e=>{console.log(e),this.updateShow=!this.updateShow,200==e.status?(this.changeList="修改成功",this.getList()):this.changeList="修改失败"})},del(e){confirm("确定要删除么")&&(console.log(typeof e.id),this.$http.delete("users/"+e.id).then(e=>{console.log(e.data.meta),200==e.data.meta.status?(this.changeList="删除成功",this.getList()):this.changeList="删除失败"}))},setrole(){this.$http.put(`users/${this.setObj.id}/role`,{rid:111}).then(e=>{console.log(e),this.setShow=!this.setShow,200==e.data.meta.status?(this.changeList="修改角色等级成功",this.getList()):this.changeList="修改角色等级失败"})},issetshow(){this.setShow=!this.setShow},set_role(e){this.setObj=e,this.setShow=!this.setShow},getList(){this.$http.get(`/users?pagenum=${this.pagenum}&pagesize=${this.pagesize}`).then(({data:e})=>{this.list=e.data.users,this.total=e.data.total,""!=this.changeList&&(this.$message({type:"success",message:this.changeList}),this.changeList="")})},handleSizeChange(e){console.log(`每页 ${e} 条`),this.pagesize=e,this.getList()},handleCurrentChange(e){this.pagenum=e,this.getList(),console.log("当前页: "+e)}}},D=P,G=(a("9e19"),Object(c["a"])(D,N,I,!1,null,"4b408aa2",null)),E=G.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rights"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("权限管理")]),a("el-breadcrumb-item",[e._v("权限列表")])],1),a("div",{staticClass:"table"},[a("table",{attrs:{border:"1",cellspacing:"0",cellpadding:"0"}},[e._m(0),e._l(e.list,(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(s))]),a("td",[e._v(e._s(t.authName))]),a("td",[e._v(e._s(t.path))]),a("td",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.level,expression:"i.level == 0"}],attrs:{type:"primary",plain:""}},[e._v("一级")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.level,expression:"i.level == 1"}],attrs:{type:"success",plain:""}},[e._v("二级")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2==t.level,expression:"i.level == 2"}],attrs:{type:"warning",plain:""}},[e._v("三级")])],1)])}))],2)])],1)},B=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",[e._v("#")]),a("th",[e._v("权限名称")]),a("th",[e._v("路径")]),a("th",[e._v("权限等级")])])}],T={name:"rights",data(){return{list:[]}},created(){},mounted(){this.getList()},methods:{getList(){this.$http.get("/rights/list").then(({data:e})=>{console.log(e),this.list=e.data})}}},F=T,R=(a("fabc"),Object(c["a"])(F,q,B,!1,null,"535f89c9",null)),J=R.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roles"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("权限管理")]),a("el-breadcrumb-item",[e._v("角色列表")])],1),a("div",{staticClass:"table"},[a("p",[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.addShow=!e.addShow}}},[e._v("添加角色")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:e.list}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},e._l(t.row.children,(function(s,o){return a("el-row",{key:o,class:["dbbottom",0===o?"dbtop":""]},[a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{closable:"","disable-transitions":!1,effect:"dark"},on:{close:function(a){return e.removeRights(t.row,s.id)}}},[e._v(e._s(s.authName))]),a("i",{staticClass:"el-icon-caret-right"})],1),a("el-col",{attrs:{span:19}},e._l(s.children,(function(s,o){return a("el-row",{key:o,class:[0===o?"":"dbtop"]},[a("el-col",{attrs:{span:6}},[a("el-tag",{attrs:{closable:"",type:"success","disable-transitions":!1,effect:"dark"},on:{close:function(a){return e.removeRights(t.row.id,s.id)}}},[e._v(e._s(s.authName))]),a("i",{staticClass:"el-icon-caret-right"})],1),a("el-col",{attrs:{span:18}},e._l(s.children,(function(s,o){return a("el-tag",{key:o,attrs:{closable:"",type:"warning","disable-transitions":!1,effect:"dark"},on:{close:function(a){return e.removeRights(t.row.id,s.id)}}},[e._v(e._s(s.authName))])})),1)],1)})),1)],1)})),1)]}}])}),a("el-table-column",{attrs:{label:"ID",prop:"id"}}),a("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),a("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),a("el-table-column",{attrs:{label:"角色操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-setting"},on:{click:function(a){return e.set_role(t.row)}}},[e._v("分配权限")])]}}])})],1)],1),a("van-popup",{model:{value:e.updateShow,callback:function(t){e.updateShow=t},expression:"updateShow"}},[a("div",{staticClass:"update"},[a("p",[a("span",[e._v("修改角色")]),a("span",{on:{click:function(t){e.updateShow=!e.updateShow}}},[e._v("x")])]),a("div",{staticClass:"input"},[a("el-form",{ref:"updateForm",attrs:{model:e.editObj,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"roleName",label:"角色名称"}},[a("el-input",{model:{value:e.editObj.roleName,callback:function(t){e.$set(e.editObj,"roleName",t)},expression:"editObj.roleName"}})],1),a("el-form-item",{attrs:{prop:"roleDesc",label:"角色描述"}},[a("el-input",{model:{value:e.editObj.roleDesc,callback:function(t){e.$set(e.editObj,"roleDesc",t)},expression:"editObj.roleDesc"}})],1)],1)],1),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:function(t){e.updateShow=!e.updateShow}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确定")])],1)])]),a("van-popup",{model:{value:e.addShow,callback:function(t){e.addShow=t},expression:"addShow"}},[a("div",{staticClass:"update"},[a("p",[a("span",[e._v("添加角色")]),a("span",{on:{click:function(t){e.addShow=!e.addShow}}},[e._v("x")])]),a("div",{staticClass:"input"},[a("el-form",{ref:"addForm",attrs:{model:e.addObj,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"roleName",label:"角色名称"}},[a("el-input",{model:{value:e.addObj.roleName,callback:function(t){e.$set(e.addObj,"roleName",t)},expression:"addObj.roleName"}})],1),a("el-form-item",{attrs:{prop:"roleDesc",label:"角色描述"}},[a("el-input",{model:{value:e.addObj.roleDesc,callback:function(t){e.$set(e.addObj,"roleDesc",t)},expression:"addObj.roleDesc"}})],1)],1)],1),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:function(t){e.addShow=!e.addShow}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确定")])],1)])]),a("van-popup",{model:{value:e.issetroleShow,callback:function(t){e.issetroleShow=t},expression:"issetroleShow"}},[a("div",{staticClass:"set_role"},[a("div",{staticClass:"center"},[a("el-tree",{ref:"tree",attrs:{"node-key":"id","default-checked-keys":e.checkboxArr,"default-expand-all":"","show-checkbox":"",data:e.rightsList,props:e.treeProps}}),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:function(t){e.issetroleShow=!e.issetroleShow}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setRole()}}},[e._v("确定")])],1)],1)])])],1)},K=[],U={data(){return{checkboxArr:[],setRoleObj:{},issetroleShow:!1,rightsList:[],treeProps:{children:"children",label:"authName"},rules:{roleName:[{required:!0,message:"请输入名称",trigger:["blur","change"]},{min:3,max:9,message:"长度在 3 到 9个字符",trigger:["blur","change"]}],roleDesc:[{required:!0,message:"请输入描述",trigger:["blur","change"]},{min:3,max:9,message:"长度在 3 到 9个字符",trigger:["blur","change"]}]},list:[],updateShow:!1,editObj:{roleName:"",roleDesc:""},addObj:{roleName:"",roleDesc:""},addShow:!1}},watch:{addShow(e){e||(this.addObj={roleName:"",roleDesc:""})}},mounted(){this.getList()},methods:{set_role(e){this.digui(e,this.checkboxArr),console.log(e,this.checkboxArr),this.issetroleShow=!this.issetroleShow,this.setRoleObj=e,this.$http.get("rights/tree").then(e=>{this.rightsList=e.data.data})},async setRole(){let e=[...this.$refs.tree.getCheckedKeys(),...this.$refs.tree.getHalfCheckedKeys()],t=e.join(",");console.log(t);let{data:a}=await this.$http.post(`roles/${this.setRoleObj.id}/rights`,{rids:t});console.log(a),this.issetroleShow=!this.issetroleShow,this.getList()},digui(e,t){if(!e.children)return console.log(e.id),t.push(e.id);e.children.forEach(e=>{this.digui(e,t)})},async del(e){await this.$http.delete("/roles/"+e.id),this.getList()},async removeRights(e,t){let a=await this.$confirm("确定删除么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});if(a){let{data:a}=await this.$http.delete(`roles/${e}/rights/${t}`);console.log(a),this.getList(),this.$message({type:"success",message:"删除成功!"})}else this.$message({type:"info",message:"删除失败"})},async add(){await this.$http.post("/roles",{roleName:this.addObj.roleName,roleDesc:this.addObj.roleDesc}),this.getList(),this.addShow=!this.addShow},edit(e){this.updateShow=!this.updateShow,this.editObj=JSON.parse(JSON.stringify(e))},async update(){await this.$http.put("/roles/"+this.editObj.id,{roleName:this.editObj.roleName,roleDesc:this.editObj.roleDesc}),this.updateShow=!this.updateShow,this.getList()},getList(){this.$http.get("/roles").then(({data:e})=>{console.log(e),this.list=e.data})}}},H=U,Q=(a("654d"),Object(c["a"])(H,M,K,!1,null,"05b673a4",null)),V=Q.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品列表")])],1),a("div",{staticClass:"content"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"请输入搜索内容"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),a("button",{staticClass:"search_btn",on:{click:function(t){return e.search()}}},[a("van-icon",{staticClass:"search_ico",attrs:{name:"search"}})],1),a("el-button",{staticStyle:{height:"40px","margin-left":"30px"},attrs:{type:"primary"},on:{click:e.toAdd}},[e._v("添加商品")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"48"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",width:"742"}}),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量"}}),a("el-table-column",{attrs:{prop:"add_time",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.add_time)+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.update_one(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.del(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pagenum,"page-sizes":[10,20,35,40,55,60,70,80,90,100],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("van-popup",{model:{value:e.updateShow,callback:function(t){e.updateShow=t},expression:"updateShow"}},[a("div",{staticClass:"update"},[a("p",[a("span",[e._v("修改商品")]),a("span",{on:{click:function(t){e.updateShow=!e.updateShow}}},[e._v("x")])]),a("div",{staticClass:"input"},[a("el-form",{ref:"updateForm",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"roleName",label:"商品名称"}},[a("el-input",{model:{value:e.updateObj.goods_name,callback:function(t){e.$set(e.updateObj,"goods_name",t)},expression:"updateObj.goods_name"}})],1),a("el-form-item",{attrs:{prop:"roleDesc",label:"商品价格"}},[a("el-input",{model:{value:e.updateObj.goods_price,callback:function(t){e.$set(e.updateObj,"goods_price",t)},expression:"updateObj.goods_price"}})],1),a("el-form-item",{attrs:{prop:"roleName",label:"商品数量"}},[a("el-input",{model:{value:e.updateObj.goods_number,callback:function(t){e.$set(e.updateObj,"goods_number",t)},expression:"updateObj.goods_number"}})],1),a("el-form-item",{attrs:{prop:"roleDesc",label:"商品重量"}},[a("el-input",{model:{value:e.updateObj.goods_weight,callback:function(t){e.$set(e.updateObj,"goods_weight",t)},expression:"updateObj.goods_weight"}})],1)],1)],1),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:function(t){e.updateShow=!e.updateShow}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确定")])],1)])])],1)},X=[],Y={data(){return{list:[],pagenum:1,pagesize:10,total:0,keyword:"",issearch:!1,updateShow:!1,updateObj:{goods_name:"",goods_number:"",goods_price:"",goods_weight:""}}},watch:{keyword(e){""==e&&(this.issearch=!1,this.getList())}},mounted(){this.getList()},methods:{toAdd(){this.$router.push("/home/addGoods")},update_one(e){this.updateShow=!this.updateShow,console.log(e),this.updateObj=e},async update(){let e=await this.$http.put("/goods/"+this.updateObj.goods_id,{goods_name:this.updateObj.goods_name,goods_price:this.updateObj.goods_price,goods_number:this.updateObj.goods_number,goods_weigth:this.updateObj.goods_weight});console.log(e),this.updateShow=!this.updateShow},async getList(){let e="";e=this.issearch?await this.$http.get(`/goods?query=${this.keyword}&pagenum=${this.pagenum}&pagesize=${this.pagesize}`):await this.$http.get(`/goods?pagenum=${this.pagenum}&pagesize=${this.pagesize}`),this.list=e.data.data.goods,this.list.forEach(e=>{e.add_time=new Date(e.add_time).toLocaleString()}),console.log(e.data),this.total=e.data.data.total},async search(){this.issearch=!0,this.getList()},async del(e){console.log(e);let t=await this.$confirm("确定删除么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});if(t){let{data:t}=await this.$http.delete("goods/"+e.goods_id);console.log(t),this.getList(),this.$message({type:"success",message:"删除成功!"})}else this.$message({type:"info",message:"删除失败"})},handleSizeChange(e){console.log(`每页 ${e} 条`),this.pagesize=e,this.getList()},handleCurrentChange(e){this.pagenum=e,this.getList(),console.log("当前页: "+e)}}},Z=Y,ee=(a("a5ab"),Object(c["a"])(Z,W,X,!1,null,"1fa882ea",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addGoods"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("添加商品")])],1),a("div",{staticClass:"content"},[a("el-alert",{attrs:{title:"添加商品信息",type:"info",center:"",closable:!1,"close-text":"","show-icon":""}}),a("div",{staticClass:"buzhou"},[a("el-steps",{attrs:{active:e.active,"finish-status":"success",space:200,"align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-tabs",{attrs:{"tab-position":e.tabPosition},on:{"tab-click":e.activeNum}},[a("el-tab-pane",{attrs:{label:"基本信息"}},[a("el-form",{ref:"addGoods",attrs:{model:e.addGoods,rules:e.rules,"label-position":e.labelPosition,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"goods_name",label:"商品名称"}},[a("el-input",{model:{value:e.addGoods.goods_name,callback:function(t){e.$set(e.addGoods,"goods_name",t)},expression:"addGoods.goods_name"}})],1),a("el-form-item",{attrs:{prop:"goods_price",label:"商品区价格"}},[a("el-input",{model:{value:e.addGoods.goods_price,callback:function(t){e.$set(e.addGoods,"goods_price",t)},expression:"addGoods.goods_price"}})],1),a("el-form-item",{attrs:{prop:"goods_number",label:"商品数量"}},[a("el-input",{model:{value:e.addGoods.goods_number,callback:function(t){e.$set(e.addGoods,"goods_number",t)},expression:"addGoods.goods_number"}})],1),a("el-form-item",{attrs:{prop:"goods_weight",label:"商品重量"}},[a("el-input",{model:{value:e.addGoods.goods_weight,callback:function(t){e.$set(e.addGoods,"goods_weight",t)},expression:"addGoods.goods_weight"}})],1),a("el-form-item",{attrs:{prop:"goods_weight",label:"商品分类"}},[a("el-cascader",{attrs:{options:e.categoriesList,props:e.peizhi,clearable:""},model:{value:e.addGoods.goods_cat,callback:function(t){e.$set(e.addGoods,"goods_cat",t)},expression:"addGoods.goods_cat"}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"商品参数"}},[e._v("配置管理")]),a("el-tab-pane",{attrs:{label:"商品属性"}},[e._v("角色管理")]),a("el-tab-pane",{attrs:{label:"商品图片"}},[e._v("定时任务补偿")]),a("el-tab-pane",{attrs:{label:"商品内容"}},[a("div",{staticClass:"textarea"},[a("textarea",{attrs:{name:"",id:"",cols:"30",rows:"10"}}),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("立即添加")])],1)])],1)],1)],1)],1)},se=[],oe={data(){return{categoriesList:[],peizhi:{label:"cat_name",value:"cat_id",children:"children",expandTrigger:"hover"},active:1,tabPosition:"left",labelPosition:"top",rules:{goods_name:[{required:!0,message:"请输入商品名",trigger:"blur"}],goods_price:[{required:!0,message:"请输入价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入重量",trigger:"blur"}],goods_number:[{required:!0,message:"请输入数量",trigger:"blur"}],goods_fenlei:[{required:!0,message:"请输选择分类",trigger:"blur"}]},addGoods:{goods_name:"",goods_number:"",goods_price:"",goods_weight:"",goods_introduce:"",goods_cat:[]}}},created(){},mounted(){this.getcategories()},methods:{async add(){this.addGoods.goods_cat=this.addGoods.goods_cat.join(",");let{data:e}=await this.$http.post("/goods",this.addGoods);this.$router.push("/home/goods"),console.log(e)},async getcategories(){let{data:e}=await this.$http.get("/categories",{params:{type:3}});console.log(e),this.categoriesList=e.data},activeNum(e){this.active=e.paneName,console.log(this.active)}}},ie=oe,le=(a("5d00"),Object(c["a"])(ie,ae,se,!1,null,"52aecb86",null)),re=le.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("分类参数")])],1),a("div",{staticClass:"content"},[a("el-alert",{attrs:{title:"注意：只允许为第三级参数设置分类",type:"warning","show-icon":"",effect:"dark"}}),a("div",{staticClass:"fenlei"},[a("p",[e._v(" 请选择商品分类： "),a("el-cascader",{attrs:{options:e.categoriesList,props:e.peizhi,clearable:""},on:{change:e.handleChange},model:{value:e.selsetIdArr,callback:function(t){e.selsetIdArr=t},expression:"selsetIdArr"}})],1)]),a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.tabs}},[a("el-button",{attrs:{type:"primary",disabled:e.isDisabled},on:{click:e.showAdd}},[e._v(e._s(e.addwhat))]),a("el-tab-pane",{attrs:{label:"动态参数"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.attributes}},[a("el-table-column",{attrs:{type:"expand"}},[[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}})]],2),a("el-table-column",{attrs:{label:"#",type:"index"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.edit(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态属性"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.attributes}},[a("el-table-column",{attrs:{type:"expand"}},[[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}})]],2),a("el-table-column",{attrs:{label:"#",type:"index"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.edit(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)],1),a("el-dialog",{attrs:{title:e.title,visible:e.dongtai,width:"50%"},on:{"update:visible":function(t){e.dongtai=t},"before-close":e.dongtaiClose}},[a("el-form",{ref:"add",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:e.label}},[a("el-input",{model:{value:e.attr_name,callback:function(t){e.attr_name=t},expression:"attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.dongtaiClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:e.addTitle,visible:e.isShowAdd,width:"50%"},on:{"update:visible":function(t){e.isShowAdd=t},"before-close":e.showAdd}},[a("el-form",{ref:"add",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:e.label}},[a("el-input",{model:{value:e.addAttr,callback:function(t){e.addAttr=t},expression:"addAttr"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.showAdd}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)],1)],1)},de=[],ce={data(){return{addTitle:"添加动态参数",addAttr:"",isShowAdd:!1,isDisabled:!0,addwhat:"添加参数",dongtai:!1,peizhi:{label:"cat_name",value:"cat_id",children:"children",expandTrigger:"hover"},categoriesList:[],selsetIdArr:[],sel:"many",attributes:[],updateAttributesObj:{},attr_name:"",title:"修改动态参数",label:"动态参数"}},created(){},mounted(){this.getcategories()},methods:{async add(){let{data:e}=await this.$http.post(`categories/${this.selsetIdArr[2]}/attributes`,{attr_name:this.addAttr,attr_sel:this.sel});console.log(e),this.getSelList(),this.isShowAdd=!this.isShowAdd,this.$message({type:"success",message:"添加成功!"})},showAdd(){this.isShowAdd=!this.isShowAdd},async update(){let{data:e}=await this.$http.put(`categories/${this.updateAttributesObj.cat_id}/attributes/${this.updateAttributesObj.attr_id}`,{attr_name:this.attr_name,attr_sel:this.sel});this.dongtai=!this.dongtai,this.getSelList(),console.log(e),this.$message({type:"success",message:"修改成功!"})},edit(e){this.updateAttributesObj=e,this.dongtai=!this.dongtai},dongtaiClose(){this.dongtai=!this.dongtai},async del(e){let t=await this.$confirm("确定删除么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});if(t){let{data:t}=await this.$http.delete(`/categories/${e.cat_id}/attributes/${e.attr_id}`);console.log(t),this.getSelList(),this.$message({type:"success",message:"删除成功!"})}else this.$message({type:"info",message:"删除失败"});console.log(data)},tabs(e){console.log(e),0==e.panName?(this.sel="many",this.title="修改动态参数",this.label="动态参数",this.addTitle="添加动态参数",this.addwhat="添加参数",this.getSelList()):(this.sel="only",this.getSelList(),this.addTitle="添加静态属性",this.title="修改静态属性",this.label="静态属性",this.addwhat="添加属性")},async getSelList(){let{data:e}=await this.$http(`/categories/${this.selsetIdArr[2]}/attributes/?sel=${this.sel}`);console.log(e),this.attributes=e.data},async getcategories(){let{data:e}=await this.$http.get("/categories",{params:{type:3}});console.log(e),this.categoriesList=e.data},handleChange(){console.log(this.selsetIdArr[2]),0==this.selsetIdArr.length?this.isDisabled=!0:this.isDisabled=!1,this.selsetIdArr.length<3&&this.$message({type:"error",message:"只能选择第三级分类"}),this.getSelList()}}},ue=ce,pe=(a("d54a"),Object(c["a"])(ue,ne,de,!1,null,"d6583d10",null)),he=pe.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("分类参数")])],1),a("el-card",[a("el-row",[a("el-button",{staticStyle:{"margin-bottom":"30px"},attrs:{type:"primary"},on:{click:e.showadd}},[e._v("添加分类")])],1),a("tree-table",{attrs:{border:"","index-text":"#","show-index":"","expand-type":!1,data:e.list,columns:e.columns,"selection-type":!1},scopedSlots:e._u([{key:"isok",fn:function(e){return[!1===e.row.cat_deleted?a("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}}):a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})]}},{key:"sort",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.cat_level,expression:"scope.row.cat_level == 0"}],attrs:{size:"mini",type:"primary"}},[e._v("一级")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.cat_level,expression:"scope.row.cat_level == 1"}],attrs:{type:"success",size:"mini"}},[e._v("二级")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2==t.row.cat_level,expression:"scope.row.cat_level == 2"}],attrs:{type:"warning",size:"mini"}},[e._v("三级")])]}},{key:"caozuo",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])}),a("el-pagination",{attrs:{"current-page":e.queryIn.pagenum,"page-sizes":[1,2,3,4,5,6,7,8,9,10],"page-size":e.queryIn.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("van-popup",{model:{value:e.updateShow,callback:function(t){e.updateShow=t},expression:"updateShow"}},[a("div",{staticClass:"add"},[a("p",[a("span",[e._v("修改列表")]),a("span",{on:{click:function(t){e.updateShow=!e.updateShow}}},[e._v("x")])]),a("el-form",{ref:"updateForm",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:e.editObj.cat_name,callback:function(t){e.$set(e.editObj,"cat_name",t)},expression:"editObj.cat_name"}})],1)],1),a("div",{staticClass:"addBtn"},[a("el-button",{on:{click:function(t){e.updateShow=!e.updateShow}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确定")])],1)],1)]),a("el-dialog",{attrs:{title:"添加",visible:e.addshow,width:"50%","before-close":e.showadd},on:{"update:visible":function(t){e.addshow=t}}},[a("el-form",{ref:"add",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名称"}},[a("el-input",{model:{value:e.addObj.cat_name,callback:function(t){e.$set(e.addObj,"cat_name",t)},expression:"addObj.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类"}},[a("el-cascader",{attrs:{options:e.parentCategoriesList,props:e.peizhi,clearable:"","change-on-select":""},model:{value:e.selsetIdArr,callback:function(t){e.selsetIdArr=t},expression:"selsetIdArr"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.showadd}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)],1)],1)],1)},ge=[],be={data(){return{selectIdArr:[],parentCategoriesList:[],peizhi:{label:"cat_name",value:"cat_id",children:"children"},addObj:{cat_name:"",cat_pid:1,cat_level:1},addshow:!1,editObj:{},updateShow:!1,queryIn:{type:3,pagenum:1,pagesize:5},list:[],total:0,columns:[{label:"分类名称",prop:"cat_name"},{label:"是否有效",type:"template",template:"isok"},{label:"排序",type:"template",template:"sort"},{label:"操作",type:"template",template:"caozuo"}]}},created(){},mounted(){this.getList()},methods:{async getcategories(){let{data:e}=await this.$http.get("/categories",{params:{type:2}});console.log(e),this.parentCategoriesList=e.data},showadd(){this.addshow=!this.addshow,this.getcategories()},async add(){this.selectIdArr.length>0&&(1==this.selectIdArr.length?(this.addObj.cat_pid=1,this.addObj.cat_level=1):(this.addObj.cat_pid=2,this.addObj.cat_level=2));let{data:e}=await this.$http.post("/categories",this.addObj);console.log(e),this.addshow=!this.addshow},async del(e){let t=await this.$confirm("确定删除么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});if(t){let{data:t}=await this.$http.delete("/categories/"+e.cat_id);console.log(t),this.getList(),this.$message({type:"success",message:"删除成功!"})}else this.$message({type:"info",message:"删除失败"})},edit(e){this.editObj=e,this.updateShow=!0},async update(){this.updateShow=!1;let{data:e}=await this.$http.put("/categories/"+this.editObj.cat_id,{cat_name:this.editObj.cat_name});200==e.meta.status?this.$message({type:"success",message:"修改成功"}):this.$message({type:"error",message:"修改失败"}),this.getList(),console.log(e)},async getList(){let{data:e}=await this.$http("/categories",{params:this.queryIn});if(console.log(e),200!=e.meta.status)return this.$message.error("获取列表失败");this.list=e.data.result,this.total=e.data.total},handleSizeChange(e){console.log(`每页 ${e} 条`),this.queryIn.pagesize=e,this.getList()},handleCurrentChange(e){this.queryIn.pagenum=e,this.getList(),console.log("当前页: "+e)}}},fe=be,ve=(a("2192"),Object(c["a"])(fe,me,ge,!1,null,"2fc29634",null)),_e=ve.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("订单管理")]),a("el-breadcrumb-item",[e._v("订单列表")])],1),a("el-card",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"48"}}),a("el-table-column",{attrs:{prop:"order_number",label:"订单编号"}}),a("el-table-column",{attrs:{prop:"order_price",label:"订单价格价格"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"是否付款"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.pay_status?a("el-button",{attrs:{size:"mini",type:"success"}},[e._v("已付")]):a("el-button",{attrs:{size:"mini",type:"danger"}},[e._v("未付款")])]}}])}),a("el-table-column",{attrs:{prop:"is_send",label:"是否发货"}}),a("el-table-column",{attrs:{prop:"create_time",label:"下单时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.update_one(t.row)}}}),a("el-button",{attrs:{type:"success",icon:"el-icon-location",size:"mini"},on:{click:function(a){return e.location(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pagenum,"page-sizes":[10,20,35,40,55,60,70,80,90,100],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加",visible:e.xinxi,width:"50%","before-close":e.close},on:{"update:visible":function(t){e.xinxi=t}}},[a("el-timeline",e._l(e.xinxiList,(function(t,s){return a("el-timeline-item",{key:s,attrs:{icon:t.icon,type:t.type,color:t.color,size:t.size,timestamp:t.time}},[e._v(" "+e._s(t.context)+" ")])})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.close}},[e._v("确 定")])],1)],1)],1)},ye=[],xe={data(){return{xinxi:!1,pagenum:1,pagesize:10,list:[],total:0,keyword:"",isSearch:!1,xinxiList:[]}},watch:{keyword(e){""==e&&(this.isSearch=!0,this.getList())}},mounted(){this.getList()},methods:{async location(e){let{data:t}=await this.$http.get("/kuaidi/1106975712662");console.log(t),this.xinxi=!this.xinxi,this.xinxiList=t.data},close(){this.xinxi=!this.xinxi},search(){this.isSearch=!0,this.getList()},async getList(){let e="";console.log(this.keyword),e=this.isSearch?await this.$http.get(`/orders?query=${this.keyword}&pagenum=${this.pagenum}&pagesize=${this.pagesize}`):await this.$http(`/orders?pagenum=${this.pagenum}&pagesize=${this.pagesize}`),this.list=e.data.data.goods,console.log(this.list),this.list.forEach(e=>{e.create_time=new Date(e.create_time).toLocaleString()}),this.total=e.data.data.total},handleSizeChange(e){console.log(`每页 ${e} 条`),this.pagesize=e,this.getList()},handleCurrentChange(e){this.pagenum=e,this.getList(),console.log("当前页: "+e)}}},ke=xe,Se=(a("a8b0"),Object(c["a"])(ke,we,ye,!1,null,"0ab7a2a8",null)),$e=Se.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("数据管理")]),a("el-breadcrumb-item",[e._v("报表数据")])],1),a("el-card",{staticClass:"box-card"},[a("div",{style:{width:"800px",height:"400px"},attrs:{id:"myChart"}})])],1)},Ce=[],Oe=a("313e"),je=a.n(Oe),ze={data(){return{}},created(){},mounted(){je.a.init(document.getElementById("myChart"));var e=this.drawLine();window.onresize=function(){e.resize()}},methods:{drawLine(){let e=je.a.init(document.getElementById("myChart"));return e.setOption({title:{text:"用户来源"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["华东","华南","华北","西部","其他"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"华东",type:"line",stack:"总量",areaStyle:{},data:[2999,3111,4100,3565,3528,6e3,6528]},{name:"华南",type:"line",stack:"总量",areaStyle:{},data:[5090,2500,3400,6e3,6400,7800,7e3]},{name:"华北",type:"line",stack:"总量",areaStyle:{},data:[6888,4e3,8010,12222,13548,12584,12500]},{name:"西部",type:"line",stack:"总量",areaStyle:{},data:[9991,4130,7777,12603,12898,13928,13320]},{name:"其他",type:"line",stack:"总量",label:{normal:{show:!0,position:"top"}},areaStyle:{},data:[15212,5800,10241,14521,15782,13891,14965]}]}),e}}},Ae=ze,Ne=(a("70ea"),Object(c["a"])(Ae,Le,Ce,!1,null,"1a437daf",null)),Ie=Ne.exports;s["default"].use(h["a"]);const Pe=[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:_,beforeEnter(e,t,a){console.log(t),"/home/home_home"==t.path&&localStorage.setItem("islogin",!0),a()}},{path:"/home",name:"home",component:$,redirect:"/home/home_home",children:[{path:"home_home",name:"home_home",component:A},{path:"users",name:"users",component:E},{path:"rights",name:"rights",component:J},{path:"roles",name:"roles",component:V},{path:"goods",name:"goods",component:te},{path:"params",name:"params",component:he},{path:"categories",name:"categoriess",component:_e},{path:"orders",name:"orders",component:$e},{path:"reports",name:"reports",component:Ie},{path:"addGoods",name:"addFoods",component:re}],beforeEnter(e,t,a){let s=sessionStorage.getItem("token");s?a():(alert("请先登录"),a("/login"))}}],De=new h["a"]({routes:Pe});var Ge=De,Ee=a("2f62");s["default"].use(Ee["a"]);var qe=new Ee["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Be=a("b970");a("157a");s["default"].use(Be["a"]);var Te=a("5c96"),Fe=a.n(Te);a("0fae");s["default"].use(Fe.a);let Re=r.a.create({baseURL:"https://www.liulongbin.top:8888/api/private/v1",timeout:5e3}),Je="";Re.interceptors.request.use(e=>{Je=Te["Loading"].service({background:"rgba(0, 0, 0, 0.8)",text:"拼命加载中",fullscreen:!0,spinner:"el-icon-loading"});let t=sessionStorage.getItem("token");return console.log(t),t?e.headers.authorization=t:Ge.push("/login"),e}),Re.interceptors.response.use(e=>(Je.close(),e));var Me=Re,Ke=(a("a342"),a("d67e")),Ue=a.n(Ke);s["default"].component("tree-table",Ue.a),s["default"].prototype.$http=Me,s["default"].config.productionTip=!1,new s["default"]({router:Ge,store:qe,render:function(e){return e(p)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var s=a("f80b"),o=a.n(s);o.a},"5d00":function(e,t,a){"use strict";var s=a("10f8"),o=a.n(s);o.a},"654d":function(e,t,a){"use strict";var s=a("668f"),o=a.n(s);o.a},"668f":function(e,t,a){},"70ea":function(e,t,a){"use strict";var s=a("76f1"),o=a.n(s);o.a},"76f1":function(e,t,a){},9019:function(e,t,a){"use strict";var s=a("dfeb"),o=a.n(s);o.a},"9b7f":function(e,t,a){},"9e19":function(e,t,a){"use strict";var s=a("b93e"),o=a.n(s);o.a},a342:function(e,t,a){},a5ab:function(e,t,a){"use strict";var s=a("0664"),o=a.n(s);o.a},a8b0:function(e,t,a){"use strict";var s=a("254e"),o=a.n(s);o.a},b93e:function(e,t,a){},c21d:function(e,t,a){},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"},d54a:function(e,t,a){"use strict";var s=a("9b7f"),o=a.n(s);o.a},dfeb:function(e,t,a){},f80b:function(e,t,a){},fabc:function(e,t,a){"use strict";var s=a("c21d"),o=a.n(s);o.a},fc9a:function(e,t,a){"use strict";var s=a("1f72"),o=a.n(s);o.a}});
//# sourceMappingURL=app.3205b19a.js.map